# ============================================================================
# NVIDIA Riva NIM Services Configuration
# ============================================================================
#
# NVIDIA API Key (REQUIRED)
# Get your key from: https://build.nvidia.com/
#
# Setup Instructions:
# 1. Copy this file: cp .env.example .env
# 2. Add your NVIDIA_API_KEY below
# 3. Authenticate Docker with NGC:
#      source .env
#      echo "$NVIDIA_API_KEY" | docker login nvcr.io --username '$oauthtoken' --password-stdin
# 4. Start services: docker compose up
#
# If you get "Access Denied", visit these URLs and accept terms:
#   https://build.nvidia.com/nvidia/magpie-tts-multilingual
#   https://build.nvidia.com/nvidia/parakeet-ctc-1.1b-asr
#
NVIDIA_API_KEY=your_nvidia_api_key_here

# ============================================================================
# Network Requirements
# ============================================================================
#
# The containers need internet access to download models from NGC on first run:
# - api.ngc.nvidia.com (NVIDIA GPU Cloud API)
# - Model downloads are 2-5 GB per service
# - First startup takes 5-10 minutes
# - Subsequent starts are fast (~30 seconds) using cached models
#
# If behind a corporate proxy, set these environment variables:
#   export HTTP_PROXY=http://proxy.example.com:8080
#   export HTTPS_PROXY=http://proxy.example.com:8080
#   export NO_PROXY=localhost,127.0.0.1
#
# Then add to docker-compose.yml under each service:
#   environment:
#     - HTTP_PROXY=${HTTP_PROXY}
#     - HTTPS_PROXY=${HTTPS_PROXY}
#     - NO_PROXY=${NO_PROXY}

# ============================================================================
# Troubleshooting
# ============================================================================
#
# Connection Timeout Errors:
# - Verify network access: curl -I https://api.ngc.nvidia.com/v2/org
# - Should return HTTP 401 (authentication required) - this is GOOD
# - If DNS fails, check /etc/resolv.conf or docker DNS settings
# - Wait longer on first run - model downloads can take 5-10 minutes
#
# Health Check Failures:
# - Check logs: docker compose logs -f
# - Wait for "Server started" or "Ready" messages
# - Test endpoints manually:
#     curl http://localhost:9000/v1/health  # TTS
#     curl http://localhost:9001/v1/health  # ASR
#
# Out of Memory:
# - Ensure GPU has at least 8GB VRAM
# - Check: nvidia-smi
# - Increase shm_size in docker-compose.yml if needed
#
# Permission Errors:
# - Check Docker has GPU access: docker run --rm --gpus all nvidia/cuda:12.0-base nvidia-smi
# - Ensure nvidia-container-toolkit is installed
#
# Clean Start:
# - Stop containers: docker compose down -v
# - Clear volumes: docker volume prune
# - Restart: docker compose up
